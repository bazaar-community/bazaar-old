*************************
What's New in Bazaar 2.3?
*************************

Bazaar 2.3 is still under development, and will be released in February
2011.  This document accumulates a high level summary of what's changed.
See the
:doc:`../release-notes/index` for a full list.

Users are encouraged to upgrade from the other stable series.  This
document outlines the improvements in Bazaar 2.3 vs Bazaar 2.2. As well as
summarizing improvements made to the core product, it highlights
enhancements within the broader Bazaar world of potential interest to
those upgrading.

Bazaar 2.3.0 is fully compatible both locally and on the network with 2.0
2.1, and 2.2, and can read and write repositories generated by all
previous versions.

Changed Behaviour
*****************

* The default ``ignore`` file created by Bazaar will contain ``__pycache__``,
  which is the name of the directory that will be used by Python to store
  bytecode files.
  (Andrea Corbellini, #626687)

* The default sort order for the ``bzr tags`` command now uses a natural sort
  where numeric substrings are sorted numerically.  The previous default was
  "asciibetical" where tags were sorted by the characters they contained.  To
  get the old behavior, one can use ``bzr tags --sort=alpha``.
  (Neil Martinsen-Burrell, #640760)

Launchpad integration
*********************

* The ``lp:`` prefix will now use your known username (from
  ``bzr launchpad-login``) to expand ``~`` to your username.  For example:
  ``bzr launchpad-login user && bzr push lp:~/project/branch`` will now
  push to ``lp:~user/project/branch``.  (John Arbash Meinel)

Performance improvements
************************

* ``bzr revert`` and ``bzr status`` are up to 15% faster on large trees
  with many changes by not repeatedly building a list of all file-ids.
  (Andrew Bennetts)

* ``bzr send`` uses less memory.
  (John Arbash Meinel, #614576)

* Inventory entries now consume less memory (on 32-bit Ubuntu file entries
  have dropped from 68 bytes to 40, and directory entries from 120 bytes
  to 48).  This affects most operations, and depending on the size of the
  tree may substantially improve the speed of operations like ``bzr
  commit``.  (Andrew Bennetts)

* Lower memory consumption when reading many chk index pages. Helpful for
  things like ``bzr co`` or ``bzr ls -R`` on large trees.
  (John Arbash Meinel)

* When building new working trees, default to reading from the repository
  rather than the source tree unless explicitly requested. (via
  ``--files-from`` and ``--hardlink`` for ``bzr branch`` and
  ``bzr checkout``. Generally, 2a format repositories extract
  content faster than seeking and reading content from another tree,
  especially in cold-cache situations. (John Arbash Meinel, #607298)

New revision specifiers
***********************

* The ``mainline`` revision specifier has been added.  It takes another revision
  spec as its input, and selects the revision which merged that revision into
  the mainline.
  
  For example, ``bzr log -vp -r mainline:1.2.3`` will show the log of the
  revision that merged revision 1.2.3 into mainline, along with its status
  output and diff.  (Aaron Bentley)

* The ``annotate`` revision specifier has been added.  It takes a path and a
  line as its input (in the form ``path:line``), and selects the revision which
  introduced that line of that file.

  For example: ``bzr log -vp -r annotate:bzrlib/transform.py:500`` will select
  the revision that introduced line 500 of transform.py, and display its log,
  status output and diff.

  It can be combined with ``mainline`` to select the revision that landed this
  line into trunk, like so: 
  ``bzr log -vp -r mainline:annotate:bzrlib/transform.py:500``
  (Aaron Bentley)


Improved conflict handling
**************************

* Deleting a versioned directory containing unversioned files will no
  longer create a conflict. Instead, the unversioned files will be moved
  into a 'bzr-orphans' directory at the root of the working tree.
  (Vincent Ladeuil, #323111)

Documentation
*************

* A beta version of the documentation is now available in GNU TexInfo
  format, used by emacs and the standalone ``info`` reader.
  (Vincent Ladeuil, #219334)


Expected releases for the 2.3 series
************************************

The 2.3 series has entered the beta phase and 2.3.0 should be released soon
enough to be included into Natty Narwhal. 

As a rough estimate, consider that 2.3.0 will be released in February
2011 and be supported until August 2012. Additional releases will be
made if critical bugs are encountered


Further information
*******************

For more detailed information on the changes made, see the
the :doc:`../release-notes/index` for:

* the interim bzr `milestones <https://launchpad.net/bzr/2.3>`_
* the plugins you use.

For a summary of changes made in earlier releases, see:

* :doc:`whats-new-in-2.1`
* :doc:`whats-new-in-2.2`


.. vim: ft=rst
