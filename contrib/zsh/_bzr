#compdef bzr

# Rudimentary zsh completion support for bzr.

# -S means there are no options after a -- and that argument is ignored

# To use this you must arrange for it to be in a directory that is on
# your $fpath, and also for compinit to be run.  I don't understand
# how to get zsh to reload this file when it changes, other than by
# starting a new zsh.

local _bzr_subcommands expl curcontext="$curcontext"

_bzr_subcommands=(${(f)"$(_call_program bzr bzr shell-complete)"})

if (( CURRENT == 2 )); then
  _describe -t subcommand 'subcommand' _bzr_subcommands
else
# this part missing
fi
